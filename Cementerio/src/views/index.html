<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti√≥n de Cementerio</title>
    <link rel="stylesheet" href="../styles/main.css">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <h1>üèõÔ∏è Sistema de Gesti√≥n de Cementerio</h1>
        </header>

        <main class="app-main">
            <div class="sidebar">
                <nav class="nav-menu">
                    <h3>Navegaci√≥n</h3>
                    <ul>
                        <li><a href="#" data-section="dashboard" class="nav-link active">üìä Dashboard</a></li>
                        <li><a href="#" data-section="difuntos" class="nav-link">üìù Difuntos</a></li>
                        <li><a href="#" data-section="parcelas" class="nav-link">üèõÔ∏è Parcelas</a></li>
                        <li><a href="#" data-section="busqueda" class="nav-link">üîç B√∫squeda</a></li>
                        <li><a href="#" data-section="configuracion" class="nav-link">‚öôÔ∏è Configuraci√≥n</a></li>
                    </ul>
                </nav>
            </div>

            <div class="content">
                <!-- Dashboard Section -->
                <section id="dashboard-section" class="content-section" style="display: block;">
                    <h2>Dashboard Principal</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Total Difuntos</h3>
                            <div class="stat-number" id="total-difuntos">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Total Parcelas</h3>
                            <div class="stat-number" id="total-parcelas">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Parcelas Ocupadas</h3>
                            <div class="stat-number" id="parcelas-ocupadas">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Parcelas Disponibles</h3>
                            <div class="stat-number" id="parcelas-disponibles">0</div>
                        </div>
                    </div>
                    
                    <div class="recent-activity">
                        <h3>Actividad Reciente</h3>
                        <div id="recentList" class="activity-list">
                            <p>No hay actividad reciente para mostrar.</p>
                        </div>
                    </div>
                </section>

                <!-- Difuntos Section -->
                <section id="difuntos-section" class="content-section" style="display: none;">
                    <div class="section-header">
                        <h2>Gesti√≥n de Difuntos</h2>
                        <button id="btn-nuevo-difunto" class="btn btn-primary">
                            ‚ûï Nuevo Difunto
                        </button>
                    </div>
                    
                    <div class="records-container">
                        <div class="records-table-container" id="difuntos-table-container">
                            <table class="records-table" id="difuntos-table">
                                <thead>
                                    <tr>
                                        <th class="sortable" data-column="id">ID <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th class="sortable" data-column="nombre">Nombre Completo <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th class="sortable" data-column="fecha_nacimiento">Fecha Nacimiento <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th class="sortable" data-column="fecha_defuncion">Fecha Defunci√≥n <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th class="sortable" data-column="parcela_numero">Parcela <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th class="action-header">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="6">Cargando registros...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Parcelas Section -->
                <section id="parcelas-section" class="content-section" style="display: none;">
                    <div class="section-header">
                        <h2>Gesti√≥n de Parcelas</h2>
                        <button id="btn-nueva-parcela" class="btn btn-primary">
                            ‚ûï Nueva Parcela
                        </button>
                    </div>
                    
                    <div class="records-container">
                        <div class="records-table-container" id="parcelas-table-container">
                            <table class="records-table" id="parcelas-table">
                                <thead>
                                    <tr>
                                        <th class="sortable" data-column="codigo">C√≥digo <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th class="sortable" data-column="tipo">Tipo <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th class="sortable" data-column="zona">Zona <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th class="sortable" data-column="seccion">Secci√≥n <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th class="sortable" data-column="fila">Fila <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th class="sortable" data-column="ubicacion">Ubicaci√≥n <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th class="sortable" data-column="estado">Estado <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th class="sortable" data-column="precio">Precio <span class="sort-icon">‚ÜïÔ∏è</span></th>
                                        <th class="action-header">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="9">Cargando parcelas...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- B√∫squeda Section -->
                <section id="busqueda-section" class="content-section" style="display: none;">
                    <h2>B√∫squeda Avanzada</h2>
                    <div class="search-advanced">
                        <form id="search-form" class="search-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="search-nombre">Nombre:</label>
                                    <input type="text" id="search-nombre" name="search-nombre">
                                </div>
                                <div class="form-group">
                                    <label for="search-apellidos">Apellidos:</label>
                                    <input type="text" id="search-apellidos" name="search-apellidos">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="search-fecha-desde">Desde:</label>
                                    <input type="date" id="search-fecha-desde" name="search-fecha-desde">
                                </div>
                                <div class="form-group">
                                    <label for="search-fecha-hasta">Hasta:</label>
                                    <input type="date" id="search-fecha-hasta" name="search-fecha-hasta">
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">üîç Buscar</button>
                                <button type="reset" class="btn btn-secondary">üóëÔ∏è Limpiar</button>
                            </div>
                        </form>
                        
                        <div id="search-results" class="search-results empty">
                            <p>Utiliza los filtros para buscar registros</p>
                        </div>
                    </div>
                </section>

                <!-- Configuraci√≥n Section -->
                <section id="configuracion-section" class="content-section" style="display: none;">
                    <h2>‚öôÔ∏è Configuraci√≥n del Sistema</h2>
                    <div class="config-container">
                        <div class="config-card">
                            <div class="config-icon">üóÑÔ∏è</div>
                            <h3>Base de Datos</h3>
                            <p>Administraci√≥n y mantenimiento de la base de datos del sistema.</p>
                            <div class="config-stats">
                                <span class="stat-item">üìä Estado: <strong>Conectada</strong></span>
                                <span class="stat-item">üíæ Tama√±o: <strong id="db-size">Calculando...</strong></span>
                            </div>
                            <div class="config-actions">
                                <button class="btn btn-primary" onclick="app.backupDatabase()">
                                    üíæ Respaldar Base de Datos
                                </button>
                                <button class="btn btn-secondary" onclick="app.optimizeDatabase()">
                                    üîß Optimizar Base de Datos
                                </button>
                            </div>
                        </div>

                        <div class="config-card">
                            <div class="config-icon">üé®</div>
                            <h3>Interfaz y Preferencias</h3>
                            <p>Personalizaci√≥n de la interfaz de usuario y configuraciones generales.</p>
                            <div class="config-options">
                                <div class="option-group">
                                    <label for="theme-select">Tema del Sistema:</label>
                                    <select id="theme-select" class="form-control">
                                        <option value="light">Claro</option>
                                        <option value="dark">Oscuro</option>
                                        <option value="auto">Autom√°tico</option>
                                    </select>
                                </div>
                                <div class="option-group">
                                    <label for="records-per-page">Registros por p√°gina:</label>
                                    <select id="records-per-page" class="form-control">
                                        <option value="25">25</option>
                                        <option value="50" selected>50</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>
                            </div>
                            <div class="config-actions">
                                <button class="btn btn-primary" onclick="app.savePreferences()">
                                    üíæ Guardar Preferencias
                                </button>
                                <button class="btn btn-secondary" onclick="app.resetPreferences()">
                                    üîÑ Restaurar Predeterminados
                                </button>
                            </div>
                        </div>

                        <div class="config-card">
                            <div class="config-icon">‚ÑπÔ∏è</div>
                            <h3>Informaci√≥n del Sistema</h3>
                            <p>Detalles t√©cnicos y informaci√≥n de la aplicaci√≥n.</p>
                            <div class="config-stats">
                                <span class="stat-item">üì± Versi√≥n: <strong id="app-version">1.0.0</strong></span>
                                <span class="stat-item">üíª Plataforma: <strong id="platform">Windows</strong></span>
                                <span class="stat-item">üîß Electron: <strong id="electron-version">Cargando...</strong></span>
                            </div>
                            <div class="config-actions">
                                <button class="btn btn-primary" onclick="app.showAbout()">
                                    üìã Acerca de
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modales -->
    <!-- Modal Difunto -->
    <div id="modal-difunto" class="modal" style="display: none;">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Nuevo Difunto</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="form-difunto" class="form">
                    <div class="form-section">
                        <h3>Datos Personales</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nombre">Nombre *</label>
                                <input type="text" id="nombre" name="nombre" required>
                            </div>
                            <div class="form-group">
                                <label for="apellidos">Apellidos *</label>
                                <input type="text" id="apellidos" name="apellidos" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="documento">Documento</label>
                                <input type="text" id="documento" name="documento">
                            </div>
                            <div class="form-group">
                                <label for="sexo">Sexo *</label>
                                <select id="sexo" name="sexo" required>
                                    <option value="M" selected>Masculino</option>
                                    <option value="F">Femenino</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>Fechas</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="fecha_nacimiento">Fecha de Nacimiento</label>
                                <input type="date" id="fecha_nacimiento" name="fecha_nacimiento">
                            </div>
                            <div class="form-group">
                                <label for="fecha_defuncion">Fecha de Defunci√≥n *</label>
                                <input type="date" id="fecha_defuncion" name="fecha_defuncion" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>Asignaci√≥n de Parcela</h3>
                        <div class="parcela-container">
                            <div class="form-group">
                                <label for="parcela_id">Parcela Disponible</label>
                                <select id="parcela_id" name="parcela_id" onchange="updateParcelaMessage(this.value, this.options[this.selectedIndex].text)">
                                    <option value="">Sin asignar</option>
                                </select>
                            </div>
                            <div id="parcela-status" class="parcela-status-right" style="display: none;">
                                <span class="status-icon">üèõÔ∏è</span>
                                <span id="parcela-message">Sin parcela asignada</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>Informaci√≥n Adicional</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="lugar_nacimiento">Lugar de Nacimiento</label>
                                <input type="text" id="lugar_nacimiento" name="lugar_nacimiento" 
                                       list="ciudades" placeholder="Escribe para buscar ciudades..." 
                                       autocomplete="off" oninput="buscarCiudades(this.value)" onfocus="buscarCiudades(this.value)">
                                <datalist id="ciudades">
                                    <!-- Las opciones se cargar√°n din√°micamente -->
                                </datalist>
                                <div id="ciudades-loading" style="display: none;" class="loading-indicator">
                                    <span>üîç</span> Buscando ciudades...
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="causa_muerte">Causa de Muerte</label>
                                <input type="text" id="causa_muerte" name="causa_muerte">
                            </div>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="observaciones">Observaciones</label>
                            <textarea id="observaciones" name="observaciones" rows="3"></textarea>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary">Cancelar</button>
                        <button type="submit" class="btn btn-primary">üíæ Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal Parcela -->
    <div id="modal-parcela" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nueva Parcela</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="form-parcela" class="form">
                    <div class="form-section">
                        <h3>Informaci√≥n de la Parcela</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="codigo">C√≥digo *</label>
                                <input type="text" id="codigo" name="codigo" required>
                            </div>
                            <div class="form-group">
                                <label for="tipo">Tipo *</label>
                                <select id="tipo" name="tipo" required>
                                    <option value="">Seleccionar...</option>
                                    <option value="nicho">Nicho</option>
                                    <option value="parcela">Parcela</option>
                                    <option value="mausoleo">Mausoleo</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="zona">Zona *</label>
                                <select id="zona" name="zona" required>
                                    <option value="">Seleccionar...</option>
                                    <option value="Nueva">Nueva</option>
                                    <option value="Vieja">Vieja</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="ubicacion">Ubicaci√≥n *</label>
                                <select id="ubicacion" name="ubicacion" required>
                                    <option value="">Seleccionar...</option>
                                    <option value="Centro">Centro</option>
                                    <option value="Izquierda">Izquierda</option>
                                    <option value="Derecha">Derecha</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="seccion">Secci√≥n *</label>
                                <input type="text" id="seccion" name="seccion" required>
                            </div>
                            <div class="form-group">
                                <label for="fila">Fila</label>
                                <input type="number" id="fila" name="fila" min="1">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="numero">N√∫mero *</label>
                                <input type="number" id="numero" name="numero" required min="1">
                            </div>
                            <div class="form-group">
                                <label for="precio">Precio</label>
                                <input type="number" id="precio" name="precio" step="0.01" min="0">
                            </div>
                        </div>
                        <div class="form-group full-width">
                            <label for="observaciones-parcela">Observaciones</label>
                            <textarea id="observaciones-parcela" name="observaciones" rows="3"></textarea>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary">Cancelar</button>
                        <button type="submit" class="btn btn-primary">üíæ Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="../scripts/main.js"></script>
</body>
</html>
